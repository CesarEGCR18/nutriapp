import{r as i,W as q,j as e,a as A}from"./app-507ae73f.js";import{A as O}from"./AuthenticatedLayout-4b09d535.js";import{M as N}from"./Modal-2a986313.js";import{P as a}from"./PrimaryButton-fdfac215.js";import{S as U}from"./SecondaryButton-a171b414.js";import{I as u}from"./InputLabel-3bc1159e.js";import{T as B}from"./TextArea-892b90af.js";import{T as P}from"./TextInput-51fdd16b.js";import{F as c}from"./index.es-de57706a.js";import"./ApplicationLogo-8566a54f.js";import"./transition-31713d59.js";function $({auth:w,interchanges:d,foodgroups:h}){const[k,b]=i.useState(!1),[C,p]=i.useState(!1),[t,g]=i.useState({}),[f,y]=i.useState(""),{data:o,setData:n,delete:S,post:E,patch:G,processing:R,reset:L,errors:m}=q({id:"",nombre:"",descripcion:"",idGrupoComida:0}),F=s=>{b(!0),g(s)},j=()=>{b(!1),setTimeout(()=>{g({})},200)},v=(s,r={})=>{p(!0),y(s),n(s==="Crear"?{id:"",nombre:"",descripcion:"",idGrupoComida:0}:{id:r.id,nombre:r.nombre,descripcion:r.descripcion,idGrupoComida:r.idGrupoComida})},x=s=>{const{name:r,value:I}=s.target;n(D=>({...D,[r]:I})),console.log(o)},l=()=>{p(!1)},M=s=>{s.preventDefault(),f==="Crear"?E(route("interchanges.store"),{onSuccess:()=>{console.log("SUCCESS"),l()},onError:()=>{console.log("ERROR"),console.log(m)}}):G(route("interchanges.update",o),{onSuccess:()=>{console.log("SUCCESS"),l()},onError:()=>{console.log("ERROR"),console.log(m)}})},T=s=>{S(route("interchanges.destroy",s),{onSuccess:()=>{console.log("SUCCESS")},onError:()=>{console.log("ERROR"),console.log(m)}})};return e.jsxs(O,{user:w.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Tabla de intercambios"}),children:[e.jsx(A,{title:"Tabla de intercambios"}),e.jsx("div",{className:"grid v-screen place-items-center mt-4",children:e.jsx("div",{className:"mt-3 mb-3 flex justify-end",children:e.jsxs(a,{className:"w-auto m-1 focus:hover:bg-yellow-600 bg-yellow-600 hover:bg-yellow-700 dark:focus:hover:bg-yellow-500 dark:hover:!bg-yellow-500 dark:hover:text-white",title:"Crear Intercambio",onClick:()=>v("Crear"),children:[e.jsx(c,{className:"text-lg mr-2",icon:["far","square-plus"]}),"Crear Intercambio"]})})}),d&&d.length>0?e.jsx("div",{className:"mx-auto",children:e.jsxs("table",{className:"table-fixed bg-gray-800 rounded-xl overflow-hidden w-auto mx-auto my-4",children:[e.jsx("thead",{className:"bg-gray-700 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-1/4 px-4 py-3 text-left",children:"Nombre"}),e.jsx("th",{className:"w-2/4 px-4 py-3 text-left"})]})}),e.jsx("tbody",{className:"text-white",children:d.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:s.nombre}),e.jsxs("td",{className:"w-full px-4 py-3 inline-flex justify-end",children:[e.jsx(a,{className:"w-auto m-1 !bg-blue-500 focus:hover:bg-blue-600 hover:!bg-blue-600 dark:focus:hover:bg-blue-500 dark:hover:!bg-blue-500 dark:hover:text-white",title:"Mostrar",onClick:()=>F(s),children:e.jsx(c,{className:"text-lg",icon:["far","eye"]})}),e.jsx(a,{className:"w-auto m-1 !bg-green-500 focus:hover:bg-green-600 hover:!bg-green-600 dark:focus:hover:bg-green-500 dark:hover:!bg-green-500 dark:hover:text-white",title:"Editar",onClick:()=>v("Editar",s),children:e.jsx(c,{className:"text-lg",icon:["far","pen-to-square"]})}),e.jsx(a,{className:"w-auto m-1 !bg-red-500 focus:hover:bg-red-600 hover:!bg-red-600 dark:focus:hover:bg-red-500 dark:hover:!bg-red-500 dark:hover:text-white",title:"Eliminar",onClick:()=>T(s.id),children:e.jsx(c,{className:"text-lg",icon:["far","trash-can"]})})]})]},s.id))})]})}):e.jsx("div",{className:"grid v-screen place-items-center mt-4",children:e.jsx("h2",{className:"text-2xl font-medium text-black dark:text-white mb-3",children:"No existen intercambios"})}),e.jsx(N,{className:"mostrar-info",show:k,onClose:j,children:e.jsxs("div",{className:"w-full p-6",children:[e.jsx("h2",{className:"text-2xl font-medium text-black dark:text-white mb-3",children:"Tabla de intercambios"}),e.jsxs("div",{className:"info text-lg text-black dark:text-white",children:[e.jsxs("p",{children:["Nombre: ",t.nombre]}),e.jsxs("p",{children:["DescripciÃ³n: ",t.descripcion]}),e.jsxs("p",{children:["Grupo alimenticio: ",t.foodgroups&&t.foodgroups.nombre]})]}),e.jsx("div",{className:"mt-5 mx-auto text-center",children:e.jsx(U,{onClick:()=>j(),children:"Cerrar"})})]})}),e.jsx(N,{className:"formulario",show:C,onClose:l,children:e.jsxs("div",{className:"w-full p-6",children:[e.jsx("h2",{className:"text-2xl font-medium text-black dark:text-white mb-3",children:f}),e.jsxs("form",{className:"p-4 grid grid-cols-1 gap-4 text-white",onSubmit:s=>M(s),children:[e.jsxs("div",{className:"mt-6 col-span-2",children:[e.jsx(u,{htmlFor:"nombre",value:"Nombre"}),e.jsx(P,{id:"nombre",name:"nombre",className:"mt-1 block w-full",required:!0,value:o.nombre,onChange:s=>x(s)})]}),e.jsxs("div",{className:"mt-6 col-span-2",children:[e.jsx(u,{htmlFor:"descripcion",value:"Descripcion"}),e.jsx(B,{id:"descripcion",name:"descripcion",className:"mt-1 block w-full whitespace-pre-wrap",required:!0,value:o.descripcion,onChange:s=>x(s)})]}),e.jsxs("div",{className:"mt-6 col-span-2",children:[e.jsx(u,{htmlFor:"idGrupoComida",value:"Grupo"}),e.jsxs("select",{required:!0,id:"idGrupoComida",name:"idGrupoComida",defaultValue:o&&o.idGrupoComida?o.idGrupoComida:"",className:"mt-1 block w-full text-black border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",onChange:s=>x(s),children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Seleccione un grupo alimenticio"}),h&&h.map((s,r)=>e.jsx("option",{value:s.id,children:s.nombre},r))]})]}),e.jsxs("div",{className:"mt-6 col-span-2",children:[e.jsx(a,{type:"submit",className:"mt-3 mr-2 w-fit",disabled:R,children:"Guardar"}),e.jsx(a,{type:"button",className:"mt-3 w-fit",onClick:()=>l(),children:"Cerrar"})]})]})]})})]})}export{$ as default};
